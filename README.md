# kawanago-jira-todo-app

## プロジェクト構成
以下のディレクトリ構成でアプリケーションを管理しています。
```plaintext
kawanago-jira-todo-app/
├── README.md      # プロジェクト概要と実装済み要件の記載
├── package.json
├── main.js        # Electron メインプロセス
├── preload.js     # レンダラープロセス向け API エクスポート
├── .env           # （現在は未使用）
├── /renderer
│   ├── index.html
│   ├── renderer.js
│   └── style.css
└── /reports
    └── templates.js  # レポート出力用テンプレート
```

## プロジェクト概要
このアプリは、Electron を利用してデスクトップ上で ToDo 管理を行い、始業/終業の報告用テキストを素早く作ることを目的としています。

※Jira 連携機能は現在は実装していません（過去の名残で文言/ファイルが残っている場合があります）。

### メイン機能
- 日々の ToDo と完了済みタスク（Done）の管理
- 各タスクに対する Description（説明）
- 新規 ToDo の追加
- `"ToDo"` と `"Backlog"` の 2 つの画面をボタンで切り替え
- タブ内でのタスク追加機能
  - テキストボックスと「追加」ボタンを配置
  - キーボードショートカット:
    - `Ctrl+Enter`: Otherセクションに追加
    - `Ctrl+1+Enter`: MustOneセクションに追加
    - `Ctrl+2+Enter`: Mediumセクションに追加
    - `Ctrl+3+Enter`: Smallセクションに追加
  - セクション上限チェック機能（上限を超える追加を防止）
- タスクのドラッグ＆ドロップによる順序変更
  - 同じタブ内でタスクをドラッグして並び替え可能
- タスク名編集
  - タスク名を ダブルクリック して直接編集可能
- 始業時・終業時に上司用報告レポートを出力
- Toast通知（最大3件・3秒で自動消去）
- ポモドーロ機能
  - 🍅でポモドーロモードへ（タスク選択→Start）
  - Start後はポモドーロ画面のみ表示（通常UIは非表示）
  - 25分作業 / 5分休憩、0:00で自動切替（通知あり）
  - ⏸/▶で一時停止/再開、🍵/✒️で作業/休憩を手動切替（手動切替は時間リセット）
  - ポモドーロ中のタスクは Done↔ToDo を切替可能（このトグルでは通知しない）

## 実装済み要件
- プロジェクト構成の整備（Electron 主プロセス、Renderer、環境変数管理）
- ToDo セクション管理
  - 4つのセクション：
    1. マストワン（最大1件）
    1. 中（最大3件）
    1. 小（最大5件）
    1. その他（無制限）
  - 初期追加は「その他」へ
  - ドラッグ＆ドロップ でセクション間移動・同セクション内並び替え
  - 各セクションの容量を超える移動はブロックし通知
- Backlog セクション（従来どおり）
- ToDo のローカル保存（electron-store 連携）
- タブ内でのタスク追加
  - テキストボックス・追加ボタン
  - キーボードショートカット:
    - `Ctrl+Enter`: Otherセクションに追加
    - `Ctrl+1+Enter`: MustOneセクションに追加（上限1件）
    - `Ctrl+2+Enter`: Mediumセクションに追加（上限3件）
    - `Ctrl+3+Enter`: Smallセクションに追加（上限5件）
  - セクション上限バリデーション付き
- タスク完了機能（チェックボックス＋取り消し線表示）
- タスクのドラッグ＆ドロップによる順序変更
- 完了タスク削除機能
  - Ctrl+Z で削除したタスクを復元
- Toast通知（最大3件・3秒で自動消去）
- 始業報告:
  - 未完了タスクを <マストワン>, <中>, <小> の各セクションごとにテンプレート化
  - 該当タスクがないセクションはスキップ
  - その他セクションは含めない
- 終業報告:
  - <完了> と <継続> のセクションに分けてクリップボードにレポートをコピー
  - テンプレート
    - <完了>
      - 完了タスク1
      - 完了タスク2
    - <継続>
      - 未完了タスク1
      - 未完了タスク2
- ToDoとBacklogの移動ができる

### ポモドーロ機能（実装済み）
- 🍅ボタンでポモドーロモードに入る
  - この時点（選択画面）は通常UIが見える
- タスク選択 → Start でタイマー画面へ
  - タイマー画面では通常UI/選択画面は非表示（ポモドーロ画面のみ）
- タイマー
  - 作業 25:00 / 休憩 05:00
  - 0:00で自動的に次フェーズへ切替（通知あり）
  - ⏸/▶で一時停止/再開
  - 🍵/✒️で作業/休憩を手動切替（手動切替は残り時間リセット）
- タスク
  - 選択したタスク一覧を表示
  - Done↔ToDoトグル可能（このトグルでは通知しない）
  - 🏠でタイマー停止して選択画面へ戻る
- ウィンドウ表示
  - Start後に選択タスク数に応じてウィンドウ高さを調整（一覧が見切れないように追従）
  - タイマー中のDone/ToDo切替では自動リサイズしない（ガタつき防止）

### 既知の技術負債/制約
- ポモドーロの選択は配列index依存のため、並び替えを行うと選択対象がズレる可能性があります（将来的に永続ID付与で解消予定）。

## デザインコンセプト
- ニューモーフィズム
- メインカラー：青
- 強調用に青と相性の良い淡いグラデーションを使用
- SVGチェックボックスのアニメーション

## UI配置
- Row1（上部）
  - ToDo ボタン（ToDo）
  - Backlog ボタン（Backlog）
  - Toast通知（エラー・完了メッセージ用）
- Row2
  - タスク追加テキストボックス（Placeholder: New Task）
  - 追加ボタン（Add）
- Row3
  - セクション：
    - MustOne（Max 1）
    - Medium – Max 3
    - Small – Max 5
    - Other（無制限）
  - エリア内スクロール可能
- Row4
- 完了タスク削除ボタン（アイコン: 🗑️）
- 始業報告ボタン（Start Work）
- 就業報告ボタン（Finish Work）

### ポモドーロ（追加UI）
- 🍅ボタン（ポモドーロモード切替）
- Start（選択タスクで開始）
- タイマー画面：🏠 / 🍵/✒️ / 25:00 or 05:00 / 進捗バー / ⏸/▶ / 選択タスク一覧

## キーボードショートカット
| ショートカット | 動作 | 備考 |
|--------------|------|------|
| `Ctrl+Enter` | Otherセクションにタスク追加 | 無制限 |
| `Ctrl+1+Enter` | MustOneセクションにタスク追加 | 上限1件 |
| `Ctrl+2+Enter` | Mediumセクションにタスク追加 | 上限3件 |
| `Ctrl+3+Enter` | Smallセクションにタスク追加 | 上限5件 |

※セクション上限に達している場合は、通知が表示され追加がブロックされます

## 今後の実装予定
- UI
  - ToDoとBacklogのタスクの幅を合わせる
  - タスクの入力箇所の横幅調節
  - ダークモード
- 実績確認機能
  - ToDoAppで完了したToDoの実績を記録できる
    - （将来的に）外部連携で見られるのが良い
- タスクの詳細（Description/Label/親Epic etc.）
  - マストワンタスクのLabelをつけることができる
  - PJ名/Epic名のLabelをつけることができる ※優先度Low
- 状態管理ライブラリの導入（Redux/Context）
- 微修正
  - ToDoとBacklogそれぞれの画面で削除機能が分けられるようになる
- 自動テスト
  - Playwrightを使った自動テスト
pomodoro- 技術負債
  - 選択がidx依存のため、並び替えでズレる懸念：タスクに永続id付与する
